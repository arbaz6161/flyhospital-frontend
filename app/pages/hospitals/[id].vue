 <template>
    <main class="container mt-4">
        <!-- Breadcrumb -->
        <Breadcrumb :items="[
            { label: 'Treatment abroad', link: '/' },
            { label: 'All specialities', link: '/hospitals' },
            { label: title, active: true }
        ]" />

        <!-- Image Gallery -->
        <div class="image-gallery my-4">
            <div v-if="hospital.image_urls && hospital.image_urls.length" class="main-image">
                <img :src="hospital.image_urls[0]" :alt="title" />
            </div>
            <!-- Thumbnails (all others) -->
            <div v-if="hospital.image_urls && hospital.image_urls.length > 1" class="thumbnail-grid">
                <img v-for="(img, index) in hospital.image_urls.slice(1)" :key="index" :src="img"
                    :alt="`${title} thumbnail ${index + 1}`" />
            </div>
        </div>

        <!-- Tabs -->
        <ul class="nav page-tabs mb-4">
            <li class="nav-item">
                <NuxtLink class="nav-link active" to="#overview">Overview</NuxtLink>
            </li>
            <li class="nav-item">
                <NuxtLink class="nav-link" to="#facilities">Facility Services</NuxtLink>
            </li>
            <li class="nav-item">
                <NuxtLink class="nav-link" to="#procedures">Procedures</NuxtLink>
            </li>
            <li class="nav-item">
                <NuxtLink class="nav-link" to="#medical-staff">Medical Staff</NuxtLink>
            </li>
            <li class="nav-item">
                <NuxtLink class="nav-link" to="#reviews">Reviews</NuxtLink>
            </li>
            <li class="nav-item">
                <NuxtLink class="nav-link" to="#hotels">Nearby Hotels</NuxtLink>
            </li>
            <li class="nav-item">
                <NuxtLink class="nav-link" to="#restaurants">Nearby Restaurants</NuxtLink>
            </li>
        </ul>

        <div id="overview" class="row">
            <!-- Left Column: Details -->
            <div class="col-lg-8">
                <!-- Title & Basic Info -->
                <div class="mb-4 section-base">
                    <div class="hospital-location-section">
                        <Icon name="material-symbols:location-on-outline" style="color:#053862;" />
                        <p class="text-muted ms-0 ps-2">{{ hospital.address }}</p>
                    </div>
                    <div class="hospital-title-section">
                        <h2>{{ title }}</h2>
                    </div>
                </div>

                <div class="card card-body rating-summary-card mb-4">
                    <!-- Row 1: Rating + Reviews + Categories -->
                    <div class="row w-100 mb-3">
                        <!-- Left side: Rating + Reviews -->
                        <div class="col-12 col-md-4 d-flex align-items-center">
                            <div class="row w-100 text-center">
                                <!-- Rating -->
                                <div class="col-7">
                                    <div class="rating-item">
                                        <div class="value">{{ Number(hospital.average_rating).toFixed(1) }}</div>
                                        <div class="stars text-warning">
                                            <template v-for="i in 5" :key="i">
                                                <!-- Full star -->
                                                <Icon v-if="i <= Math.floor(hospital.average_rating)"
                                                    name="carbon:star-filled" />

                                                <!-- Half star -->
                                                <Icon
                                                    v-else-if="i === Math.floor(hospital.average_rating) + 1 && (hospital.average_rating % 1) >= 0.5"
                                                    name="carbon:star-half" />

                                                <!-- Empty star -->
                                                <Icon v-else name="carbon:star" />
                                            </template>
                                        </div>
                                    </div>
                                </div>

                                <!-- Reviews -->
                                <div class="col-5">
                                    <div class="rating-item">
                                        <div class="value">{{ hospital.total_reviews }}</div>
                                        <div class="label">reviews</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right side: Categories -->
                        <div
                            class="col-12 col-md-8 ps-3 d-flex flex-wrap gap-3 align-items-center category-card-wrapper">
                            <span class="category-card">Doctor <span>4.8</span></span>
                            <span class="category-card">Facilities <span>4.8</span></span>
                            <span class="category-card">Staff <span>4.9</span></span>
                            <span class="category-card">Language assistance <span>4.8</span></span>
                            <span class="category-card">Support <span>4.9</span></span>
                        </div>
                    </div>

                    <!-- Row 2: Contact Info -->
                    <div class="row w-100"> 
                        <div class="col-12">
                            <ul class="hospital-contact-info list-unstyled mb-0 d-flex flex-wrap gap-4">
                                <li>
                                    <NuxtLink :to="`tel:${hospital.phone}`">
                                        <Icon name="bi:telephone" style="color:#053862; margin-right:5px; font-size: 18px;"/>
                                        <span class="text-dark cursor-pointer">{{ hospital.phone }}</span>
                                    </NuxtLink>
                                </li>
                                <li>
                                    <NuxtLink
                                        :to="`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(hospital.location)}`">
                                        <Icon name="material-symbols:location-on-outline" style="color:#053862; margin-right:5px; font-size: 18px;"/>
                                        <span class="text-dark cursor-pointer">{{ hospital.address }}</span>
                                    </NuxtLink>
                                </li>
                                <li>
                                    <NuxtLink :to="`/${hospital.url}`" target="_blank">
                                        <Icon name="streamline-plump:web-remix" style="color:#053862; margin-right:5px; font-size: 18px;"/>
                                        <span class="text-dark cursor-pointer">flyhospitals.info</span>
                                    </NuxtLink>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- About -->
                <div class="mb-5 pb-5 section-base">
                    <h3 class="section-title">About the hospital</h3>
                    <p class="about-text">
                        {{ truncatedDescription }}
                        <span v-if="needsTruncate" @click.prevent="toggleDescription"
                            class="text-primary cursor-pointer">
                            {{ showMore ? " Show less" : " ... Show more" }}
                        </span>
                    </p>

                    <ul class="list-unstyled">
                        <li class="info">
                            <svg width="20" height="20" viewBox="0 0 23 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M10.417 22.5H4.00033C3.38149 22.5 2.78799 22.2542 2.35041 21.8166C1.91282 21.379 1.66699 20.7855 1.66699 20.1667V6.16667C1.66699 5.54783 1.91282 4.95434 2.35041 4.51675C2.78799 4.07917 3.38149 3.83333 4.00033 3.83333H18.0003C18.6192 3.83333 19.2127 4.07917 19.6502 4.51675C20.0878 4.95434 20.3337 5.54783 20.3337 6.16667V13.1667M15.667 1.5V6.16667M6.33366 1.5V6.16667M1.66699 10.8333H20.3337M14.5003 20.1667L16.8337 22.5L21.5003 17.8333"
                                    stroke="#053862" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>

                            <span> {{ new Date().getFullYear() - new Date(hospital.start_date).getFullYear() }}'th Year
                                of
                                Foundation</span>
                        </li>
                        <li class="info">
                            <svg width="20" height="20" viewBox="0 0 23 26" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M7.26673 12.0667C6.02905 12.0667 4.84207 11.575 3.9669 10.6998C3.09173 9.82466 2.60006 8.63768 2.60006 7.4V3.66667C2.60006 3.41913 2.6984 3.18174 2.87343 3.0067C3.04847 2.83167 3.28586 2.73334 3.5334 2.73334H4.46673C4.71427 2.73334 4.95166 2.635 5.1267 2.45997C5.30173 2.28493 5.40006 2.04754 5.40006 1.8C5.40006 1.55247 5.30173 1.31507 5.1267 1.14004C4.95166 0.965002 4.71427 0.866669 4.46673 0.866669H3.5334C2.79079 0.866669 2.0786 1.16167 1.5535 1.68677C1.0284 2.21187 0.733398 2.92406 0.733398 3.66667V7.4C0.734598 8.45442 0.991719 9.4928 1.48268 10.4259C1.97364 11.3591 2.68376 12.1591 3.55206 12.7573C4.38714 13.4921 5.06427 14.3889 5.54237 15.3932C6.02047 16.3976 6.28959 17.4885 6.3334 18.6C6.3334 20.3328 7.02173 21.9945 8.24697 23.2198C9.47221 24.445 11.134 25.1333 12.8667 25.1333C14.5995 25.1333 16.2613 24.445 17.4865 23.2198C18.7117 21.9945 19.4001 20.3328 19.4001 18.6V17.536C20.2799 17.3088 21.0466 16.7686 21.5566 16.0165C22.0666 15.2645 22.2848 14.3522 22.1703 13.4508C22.0558 12.5494 21.6165 11.7207 20.9347 11.12C20.2529 10.5193 19.3754 10.1879 18.4667 10.1879C17.5581 10.1879 16.6806 10.5193 15.9988 11.12C15.317 11.7207 14.8776 12.5494 14.7632 13.4508C14.6487 14.3522 14.8669 15.2645 15.3768 16.0165C15.8868 16.7686 16.6536 17.3088 17.5334 17.536V18.6C17.5334 19.8377 17.0417 21.0247 16.1666 21.8998C15.2914 22.775 14.1044 23.2667 12.8667 23.2667C11.6291 23.2667 10.4421 22.775 9.5669 21.8998C8.69173 21.0247 8.20006 19.8377 8.20006 18.6C8.24623 17.4872 8.51826 16.3953 8.99961 15.3909C9.48097 14.3865 10.1616 13.4905 11.0001 12.7573C11.8649 12.157 12.5714 11.3561 13.0591 10.4231C13.5467 9.49007 13.801 8.45277 13.8001 7.4V3.66667C13.8001 2.92406 13.5051 2.21187 12.98 1.68677C12.4549 1.16167 11.7427 0.866669 11.0001 0.866669H10.0667C9.8192 0.866669 9.5818 0.965002 9.40676 1.14004C9.23173 1.31507 9.1334 1.55247 9.1334 1.8C9.1334 2.04754 9.23173 2.28493 9.40676 2.45997C9.5818 2.635 9.8192 2.73334 10.0667 2.73334H11.0001C11.2476 2.73334 11.485 2.83167 11.66 3.0067C11.8351 3.18174 11.9334 3.41913 11.9334 3.66667V7.4C11.9334 8.01284 11.8127 8.61967 11.5782 9.18586C11.3436 9.75204 10.9999 10.2665 10.5666 10.6998C10.1332 11.1332 9.61877 11.4769 9.05259 11.7114C8.4864 11.946 7.87957 12.0667 7.26673 12.0667ZM18.4667 15.8C17.9717 15.8 17.4969 15.6033 17.1468 15.2533C16.7967 14.9032 16.6001 14.4284 16.6001 13.9333C16.6001 13.4383 16.7967 12.9635 17.1468 12.6134C17.4969 12.2633 17.9717 12.0667 18.4667 12.0667C18.9618 12.0667 19.4366 12.2633 19.7867 12.6134C20.1367 12.9635 20.3334 13.4383 20.3334 13.9333C20.3334 14.4284 20.1367 14.9032 19.7867 15.2533C19.4366 15.6033 18.9618 15.8 18.4667 15.8Z"
                                    fill="#053862" />
                            </svg>

                            <span>12 doctors</span>
                        </li>
                        <li class="info">
                            <svg width="20" height="20" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"
                                style="color: #0b3d6e">
                                <!-- Outer circle -->
                                <circle cx="100" cy="100" r="88" fill="none" stroke="currentColor" stroke-width="16" />
                                <!-- Eyes -->
                                <circle cx="70" cy="80" r="12" fill="currentColor" />
                                <circle cx="130" cy="80" r="12" fill="currentColor" />
                                <!-- Smile -->
                                <path d="M60 120 Q100 160 140 120" fill="none" stroke="currentColor" stroke-width="16"
                                    stroke-linecap="round" />
                            </svg>
                            <span>43000 patients per year</span>
                        </li>
                    </ul>
                </div>

                <!-- Facility Services -->
                <div id="facilities" class="mb-5 pb-5 section-base">
                    <h3 class="section-title">Facility Services</h3>
                    <div v-if="hospital.facilities && hospital.facilities.length" class="facility-grid">
                        <div v-for="facility in hospital.facilities" :key="facility.name"
                            class="facility-item d-flex align-items-center gap-2">
                            <!-- Dynamic Icon -->
                            <Icon :name="getIcon(facility.slug)" size="30" />
                            <span>{{ facility.name }}</span>
                        </div>
                    </div>
                    <div class="facility-grid">
                        <div class="facility-item">
                            <svg width="26" height="26" viewBox="0 0 26 26" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M1.91634 14.1666L4.24967 15.3333M24.083 14.75L21.7497 15.3333M8.33301 20.5833L8.62001 19.867C9.04584 18.8018 9.25934 18.2686 9.70384 17.9676C10.1472 17.6666 10.7212 17.6666 11.8692 17.6666H14.1302C15.2782 17.6666 15.8522 17.6666 16.2955 17.9676C16.7388 18.2686 16.9535 18.8018 17.3805 19.867L17.6663 20.5833M1.33301 20V23.3623C1.33301 23.8045 1.61301 24.2081 2.05867 24.4053C2.34684 24.5336 2.62217 24.6666 2.95584 24.6666H4.96017C5.29384 24.6666 5.56917 24.5336 5.85851 24.4053C6.30184 24.2081 6.58301 23.8045 6.58301 23.3623V21.1666M19.4163 21.1666V23.3623C19.4163 23.8045 19.6963 24.2081 20.142 24.4053C20.4302 24.5336 20.7055 24.6666 21.0392 24.6666H23.0435C23.3772 24.6666 23.6525 24.5336 23.9418 24.4053C24.3852 24.2081 24.6663 23.8045 24.6663 23.3623V20M22.333 10.0833L23.4997 9.49998M3.66634 10.0833L2.49967 9.49998M4.24967 11.25L5.51901 7.44081C6.03234 5.90081 6.28901 5.13081 6.90034 4.69098C7.51167 4.25115 8.32367 4.24998 9.94651 4.24998H16.0528C17.6757 4.24998 18.4877 4.24998 19.0978 4.69098C19.7103 5.13081 19.967 5.90081 20.4803 7.44081L21.7497 11.25M17.083 4.24998C16.803 2.84181 16.663 2.13831 16.3293 1.73581C15.9957 1.33331 15.5523 1.33331 14.6668 1.33331H11.3337C10.447 1.33331 10.0037 1.33331 9.67001 1.73581C9.33634 2.13831 9.19634 2.84181 8.91634 4.24998"
                                    stroke="#053862" stroke-width="1.75" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                            Airport Pickup
                        </div>
                        <div class="facility-item">
                            <svg width="26" height="27" viewBox="0 0 26 27" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M0.75 24.5H25.25V26.25H0.75V24.5ZM20.4375 9.625H6C5.53587 9.625 5.09075 9.80937 4.76256 10.1376C4.43437 10.4658 4.25 10.9109 4.25 11.375V18.375C4.25139 19.5349 4.71277 20.6469 5.53294 21.4671C6.35311 22.2872 7.4651 22.7486 8.625 22.75H15.625C16.7849 22.7486 17.8969 22.2872 18.7171 21.4671C19.5372 20.6469 19.9986 19.5349 20 18.375V17.5H20.4375C21.4818 17.5 22.4833 17.0852 23.2217 16.3467C23.9602 15.6083 24.375 14.6068 24.375 13.5625C24.375 12.5182 23.9602 11.5167 23.2217 10.7783C22.4833 10.0398 21.4818 9.625 20.4375 9.625ZM18.25 18.375C18.2493 19.071 17.9725 19.7383 17.4804 20.2304C16.9883 20.7225 16.321 20.9993 15.625 21H8.625C7.92902 20.9993 7.26174 20.7225 6.76961 20.2304C6.27748 19.7383 6.00069 19.071 6 18.375V11.375H18.25V18.375ZM20.4375 15.75H20V11.375H20.4375C21.0177 11.375 21.5741 11.6055 21.9843 12.0157C22.3945 12.4259 22.625 12.9823 22.625 13.5625C22.625 14.1427 22.3945 14.6991 21.9843 15.1093C21.5741 15.5195 21.0177 15.75 20.4375 15.75ZM15.625 7.875H13.875V7.74725C13.8761 7.42207 13.7861 7.10309 13.6152 6.82643C13.4443 6.54977 13.1994 6.32649 12.9081 6.18188L10.5588 5.0085C9.97624 4.71927 9.48636 4.27271 9.1446 3.71939C8.80283 3.16607 8.62284 2.52811 8.625 1.87775V0.875H10.375V1.87775C10.374 2.20302 10.4641 2.52207 10.6352 2.79874C10.8062 3.07541 11.0513 3.29863 11.3427 3.44313L13.6904 4.6165C14.273 4.9056 14.7631 5.35211 15.105 5.90544C15.447 6.45877 15.6271 7.0968 15.625 7.74725V7.875Z"
                                    fill="#053862" />
                            </svg>
                            Cafe
                        </div>
                        <div class="facility-item">
                            <svg width="26" height="18" viewBox="0 0 26 18" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M12.9997 17.8268C12.4972 17.8268 12.0726 17.6534 11.7257 17.3065C11.3788 16.9596 11.2054 16.5349 11.2054 16.0325C11.2054 15.53 11.3788 15.105 11.7257 14.7573C12.0726 14.4097 12.4972 14.2362 12.9997 14.237C13.5021 14.2378 13.9268 14.4112 14.2737 14.7573C14.6206 15.1034 14.794 15.5281 14.794 16.0313C14.794 16.5345 14.6206 16.9596 14.2737 17.3065C13.9268 17.6534 13.5021 17.8268 12.9997 17.8268ZM12.9997 7.46216C14.3686 7.46216 15.657 7.69549 16.8649 8.16216C18.0727 8.62883 19.1589 9.27788 20.1234 10.1093C20.3178 10.2664 20.4197 10.4636 20.429 10.7008C20.4391 10.9373 20.359 11.141 20.1887 11.3122C20.0222 11.4778 19.8196 11.5579 19.5809 11.5525C19.3421 11.547 19.1251 11.4681 18.9299 11.3157C18.1311 10.646 17.2246 10.1202 16.2104 9.73833C15.1961 9.35721 14.1259 9.16666 12.9997 9.16666C11.8735 9.16666 10.8032 9.35721 9.78902 9.73833C8.7748 10.1194 7.86869 10.6452 7.07069 11.3157C6.87625 11.4681 6.65886 11.5459 6.41852 11.549C6.17975 11.5521 5.97752 11.4704 5.81186 11.304C5.64541 11.1337 5.56569 10.9303 5.57269 10.6938C5.57969 10.4574 5.6808 10.2602 5.87602 10.1023C6.84047 9.2701 7.92702 8.62221 9.13569 8.15866C10.3428 7.69432 11.6308 7.46216 12.9997 7.46216ZM12.9997 0.462158C15.3704 0.462158 17.5777 0.871658 19.6217 1.69066C21.6657 2.51044 23.4834 3.64988 25.0747 5.10899C25.2691 5.27388 25.3726 5.47999 25.385 5.72733C25.3967 5.97388 25.3174 6.18271 25.147 6.35383C24.9658 6.53427 24.7519 6.61049 24.5054 6.58249C24.258 6.55527 24.0297 6.45338 23.8205 6.27682C22.3754 4.98027 20.7304 3.9711 18.8855 3.24933C17.0406 2.52755 15.0787 2.16666 12.9997 2.16666C10.9207 2.16666 8.95875 2.52755 7.11386 3.24933C5.26897 3.9711 3.62397 4.98027 2.17886 6.27682C1.96886 6.45338 1.74097 6.55566 1.49519 6.58366C1.24786 6.61088 1.03397 6.53427 0.853523 6.35383C0.682412 6.18271 0.603079 5.97388 0.615523 5.72733C0.62719 5.48077 0.730246 5.27466 0.92469 5.10899C2.51602 3.64988 4.33369 2.51044 6.37769 1.69066C8.42169 0.872436 10.629 0.462158 12.9997 0.462158Z"
                                    fill="#053862" />
                            </svg>
                            Free Wifi
                        </div>
                        <div class="facility-item">
                            <svg width="28" height="28" viewBox="0 0 28 28" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M1.75 16.079C1.75 16.079 5.25 14.5833 8.16667 14.5833C10.2241 14.5833 12.4833 15.4105 13.9965 16.0924C15.1573 16.6151 15.8252 16.9452 16.0907 18.1907C16.2756 19.0557 15.6543 20.4977 14.7723 20.5689L14.1511 20.6191M14.1511 20.6191C12.7266 20.6191 10.5216 20.1967 10.5216 20.1967M14.1511 20.6191C16.1268 20.6191 21.3278 19.6805 23.1712 19.3357C23.611 19.2541 24.0666 19.194 24.4848 19.3515C25.011 19.5504 25.7168 20.0305 26.054 21.189C26.3177 22.0943 25.6847 22.9652 24.8057 23.3053C22.2273 24.3028 16.8507 26.25 14.1511 26.25C7 26.25 1.75 24.4551 1.75 24.4551M17.5735 13.405C17.5922 13.9434 17.9258 14.4066 18.4578 14.4882C18.802 14.5407 19.2564 14.5833 19.8333 14.5833C20.2936 14.5867 20.7534 14.5549 21.2088 14.4882C21.7408 14.4066 22.0745 13.9434 22.0932 13.4056C22.1147 12.7872 22.1398 11.8288 22.1544 10.4877C23.1272 10.4788 24.0999 10.4584 25.0722 10.4265C25.6101 10.4078 26.0733 10.0742 26.1549 9.54216C26.2074 9.198 26.25 8.74358 26.25 8.16666C26.2534 7.70641 26.2216 7.24657 26.1549 6.79116C26.0733 6.25916 25.6101 5.9255 25.0722 5.90683C24.4539 5.88525 23.4955 5.86016 22.1544 5.84558C22.1454 4.87276 22.125 3.90008 22.0932 2.92775C22.0745 2.38991 21.7408 1.92675 21.2088 1.84508C20.7534 1.77865 20.2936 1.74686 19.8333 1.75C19.3731 1.74664 18.9132 1.77842 18.4578 1.84508C17.9258 1.92675 17.5922 2.38991 17.5735 2.92775C17.5519 3.54608 17.5268 4.5045 17.5122 5.84558C16.5394 5.85452 15.5668 5.87494 14.5944 5.90683C14.0566 5.9255 13.5934 6.25916 13.5117 6.79116C13.4592 7.13533 13.4167 7.58975 13.4167 8.16666C13.4167 8.74358 13.4587 9.19858 13.5117 9.54216C13.5934 10.0742 14.0566 10.4078 14.5944 10.4265C15.2127 10.4481 16.1712 10.4732 17.5122 10.4877C17.5268 11.8288 17.5519 12.7878 17.5735 13.4056V13.405Z"
                                    stroke="#053862" stroke-width="1.75" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                            Medical travel Insurance
                        </div>
                        <div class="facility-item">
                            <svg width="28" height="28" viewBox="0 0 28 28" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M3.5 5.83333C3.5 5.21449 3.74583 4.621 4.18342 4.18342C4.621 3.74583 5.21449 3.5 5.83333 3.5H22.1667C22.7855 3.5 23.379 3.74583 23.8166 4.18342C24.2542 4.621 24.5 5.21449 24.5 5.83333V22.1667C24.5 22.7855 24.2542 23.379 23.8166 23.8166C23.379 24.2542 22.7855 24.5 22.1667 24.5H5.83333C5.21449 24.5 4.621 24.2542 4.18342 23.8166C3.74583 23.379 3.5 22.7855 3.5 22.1667V5.83333Z"
                                    stroke="#053862" stroke-width="2.33333" stroke-linecap="round"
                                    stroke-linejoin="round" />
                                <path
                                    d="M11.667 18.6666V9.33331H14.7785C15.6372 9.33331 16.3337 10.3775 16.3337 11.6666C16.3337 12.9558 15.6372 14 14.7785 14H11.667"
                                    stroke="#053862" stroke-width="2.33333" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>

                            Parking available
                        </div>
                        <div class="facility-item">
                            <svg width="28" height="28" viewBox="0 0 28 28" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_49_891)">
                                    <path
                                        d="M3.14396 2.61078L23.2925 22.7593C23.6748 23.1416 23.8896 23.6602 23.8896 24.2009C23.8896 24.7415 23.6748 25.2601 23.2925 25.6424C22.9101 26.0246 22.3915 26.2393 21.8509 26.2393C21.3103 26.2393 20.7918 26.0246 20.4093 25.6424L15.4875 20.6358C15.1654 20.3087 14.9847 19.8682 14.9843 19.4091V19.1067C14.9844 18.8749 14.9384 18.6455 14.849 18.4316C14.7596 18.2177 14.6287 18.0238 14.4637 17.8609L13.8283 17.2741C13.6125 17.0751 13.3502 16.9335 13.0654 16.8624C12.7806 16.7913 12.4825 16.793 12.1986 16.8673C11.7508 16.9841 11.2802 16.9819 10.8335 16.8607C10.3869 16.7396 9.97967 16.5037 9.65231 16.1766L4.98036 11.5041C2.2088 8.7325 1.18888 4.54726 3.14396 2.61078Z"
                                        stroke="#053862" stroke-width="1.75" stroke-linejoin="round" />
                                    <path
                                        d="M21.8745 1.75L17.6499 5.97461C17.3248 6.29963 17.067 6.6855 16.891 7.11019C16.7151 7.53488 16.6245 7.99007 16.6245 8.44977V9.26242C16.6246 9.3774 16.6019 9.49126 16.5579 9.59748C16.5139 9.7037 16.4494 9.80021 16.368 9.88148L15.7495 10.5M17.4995 12.25L18.118 11.6315C18.1993 11.5502 18.2958 11.4856 18.4021 11.4416C18.5083 11.3976 18.6221 11.375 18.7371 11.375H19.5498C20.0095 11.375 20.4647 11.2844 20.8893 11.1085C21.314 10.9326 21.6999 10.6747 22.0249 10.3496L26.2495 6.125M24.062 3.9375L19.687 8.3125M10.937 20.125L5.4836 25.6091C5.07338 26.0192 4.51708 26.2495 3.93703 26.2495C3.35699 26.2495 2.80069 26.0192 2.39047 25.6091C1.98038 25.1988 1.75 24.6425 1.75 24.0625C1.75 23.4825 1.98038 22.9262 2.39047 22.5159L6.99953 17.9375"
                                        stroke="#053862" stroke-width="1.75" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </g>
                                <defs>
                                    <clipPath id="clip0_49_891">
                                        <rect width="28" height="28" fill="white" />
                                    </clipPath>
                                </defs>
                            </svg>
                            Restaurant
                        </div>
                        <div class="facility-item">
                            <svg width="28" height="28" viewBox="0 0 28 28" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M19.25 12.25C18.02 12.2505 16.8122 12.5775 15.75 13.1976V7.875C15.75 6.25055 15.1047 4.69263 13.956 3.54397C12.8074 2.39531 11.2495 1.75 9.625 1.75C8.00055 1.75 6.44263 2.39531 5.29397 3.54397C4.14531 4.69263 3.5 6.25055 3.5 7.875V20.125C3.49969 21.3734 3.88088 22.592 4.59251 23.6176C5.30414 24.6433 6.31222 25.427 7.48168 25.8637C8.65115 26.3004 9.92615 26.3693 11.1359 26.0611C12.3456 25.753 13.4322 25.0825 14.2502 24.1395C15.0572 24.9647 16.0557 25.5775 17.1569 25.9233C18.258 26.2691 19.4276 26.3372 20.5615 26.1214C21.6953 25.9056 22.7582 25.4127 23.6553 24.6866C24.5525 23.9605 25.2561 23.0238 25.7035 21.9598C26.151 20.8959 26.3282 19.7378 26.2196 18.5887C26.111 17.4397 25.7198 16.3353 25.0809 15.3741C24.442 14.4129 23.5753 13.6246 22.5579 13.0795C21.5406 12.5344 20.4042 12.2495 19.25 12.25ZM19.25 14C20.4895 14.0021 21.6884 14.4424 22.6347 15.243C23.581 16.0436 24.2138 17.153 24.4212 18.375H14.0788C14.2862 17.153 14.919 16.0436 15.8653 15.243C16.8116 14.4424 18.0105 14.0021 19.25 14ZM5.25 7.875C5.25 6.71468 5.71094 5.60188 6.53141 4.78141C7.35188 3.96094 8.46468 3.5 9.625 3.5C10.7853 3.5 11.8981 3.96094 12.7186 4.78141C13.5391 5.60188 14 6.71468 14 7.875V13.125H5.25V7.875ZM9.625 24.5C8.4651 24.4986 7.35311 24.0372 6.53294 23.2171C5.71277 22.3969 5.25139 21.2849 5.25 20.125V14.875H13.7944C12.9163 15.9635 12.3863 17.2912 12.2733 18.6851C12.1604 20.0791 12.4696 21.4748 13.1609 22.6905C12.7566 23.2502 12.2253 23.706 11.6106 24.0206C10.996 24.3351 10.3155 24.4994 9.625 24.5ZM19.25 24.5C18.0105 24.4979 16.8116 24.0576 15.8653 23.257C14.919 22.4564 14.2862 21.347 14.0788 20.125H24.4212C24.2138 21.347 23.581 22.4564 22.6347 23.257C21.6884 24.0576 20.4895 24.4979 19.25 24.5Z"
                                    fill="#053862" />
                            </svg>
                            Pharmacy
                        </div>
                        <div class="facility-item">
                            <svg width="26" height="26" viewBox="0 0 26 26" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M24.6663 17.6667C24.6663 20.966 24.6663 22.6168 23.6408 23.6412C22.6165 24.6667 20.9657 24.6667 17.6663 24.6667H8.33301C5.03367 24.6667 3.38284 24.6667 2.35851 23.6412C1.33301 22.6168 1.33301 20.966 1.33301 17.6667V13C1.33301 9.70067 1.33301 8.04983 2.35851 7.0255C3.38284 6 5.03367 6 8.33301 6H17.6663C20.9657 6 22.6165 6 23.6408 7.0255C24.6663 8.04983 24.6663 9.70067 24.6663 13V17.6667Z"
                                    stroke="#053862" stroke-width="1.75" />
                                <path d="M9.5 1.33331L13 5.41665L16.5 1.33331M17.6667 5.99998V24.6666" stroke="#053862"
                                    stroke-width="1.75" stroke-linecap="round" />
                                <path
                                    d="M22.3333 17.6666C22.3333 17.3572 22.2104 17.0605 21.9916 16.8417C21.7728 16.6229 21.4761 16.5 21.1667 16.5C20.8572 16.5 20.5605 16.6229 20.3417 16.8417C20.1229 17.0605 20 17.3572 20 17.6666C20 17.9761 20.1229 18.2728 20.3417 18.4916C20.5605 18.7104 20.8572 18.8333 21.1667 18.8333C21.4761 18.8333 21.7728 18.7104 21.9916 18.4916C22.2104 18.2728 22.3333 17.9761 22.3333 17.6666ZM22.3333 13C22.3333 12.6906 22.2104 12.3938 21.9916 12.175C21.7728 11.9562 21.4761 11.8333 21.1667 11.8333C20.8572 11.8333 20.5605 11.9562 20.3417 12.175C20.1229 12.3938 20 12.6906 20 13C20 13.3094 20.1229 13.6061 20.3417 13.8249C20.5605 14.0437 20.8572 14.1666 21.1667 14.1666C21.4761 14.1666 21.7728 14.0437 21.9916 13.8249C22.2104 13.6061 22.3333 13.3094 22.3333 13Z"
                                    fill="#053862" />
                            </svg>

                            TV in the room
                        </div>
                        <div class="facility-item">
                            <svg width="28" height="28" viewBox="0 0 28 28" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_49_906)">
                                    <path
                                        d="M26.25 8.75C26.7141 8.75 27.1592 8.93437 27.4874 9.26256C27.8156 9.59075 28 10.0359 28 10.5V26.25C28 26.7141 27.8156 27.1592 27.4874 27.4874C27.1592 27.8156 26.7141 28 26.25 28H14C13.5359 28 13.0908 27.8156 12.7626 27.4874C12.4344 27.1592 12.25 26.7141 12.25 26.25V10.5C12.25 10.0359 12.4344 9.59075 12.7626 9.26256C13.0908 8.93437 13.5359 8.75 14 8.75H26.25ZM26.25 10.5H14V26.25H26.25V10.5ZM20.9247 13.6447L24.4247 21.5198C24.519 21.7319 24.5251 21.9727 24.4417 22.1893C24.3583 22.4059 24.1924 22.5805 23.9802 22.6747C23.7681 22.769 23.5273 22.7751 23.3107 22.6917C23.0941 22.6083 22.9195 22.4424 22.8253 22.2302L22.2792 21H17.9708L17.4247 22.2302C17.3305 22.4424 17.1559 22.6083 16.9393 22.6917C16.7227 22.7751 16.4819 22.769 16.2698 22.6747C16.0576 22.5805 15.8917 22.4059 15.8083 22.1893C15.7249 21.9727 15.731 21.7319 15.8253 21.5198L19.3253 13.6447C19.3939 13.49 19.5061 13.3585 19.648 13.2662C19.79 13.1739 19.9557 13.1248 20.125 13.1248C20.2943 13.1248 20.46 13.1739 20.602 13.2662C20.7439 13.3585 20.8561 13.49 20.9247 13.6447ZM20.125 16.1525L18.7478 19.25H21.5005L20.125 16.1525ZM14 0C14.4641 0 14.9092 0.184374 15.2374 0.512563C15.5656 0.840752 15.75 1.28587 15.75 1.75V6.125C15.75 6.35706 15.6578 6.57962 15.4937 6.74372C15.3296 6.90781 15.1071 7 14.875 7C14.6429 7 14.4204 6.90781 14.2563 6.74372C14.0922 6.57962 14 6.35706 14 6.125V1.75H1.75V17.5H9.625C9.85706 17.5 10.0796 17.5922 10.2437 17.7563C10.4078 17.9204 10.5 18.1429 10.5 18.375C10.5 18.6071 10.4078 18.8296 10.2437 18.9937C10.0796 19.1578 9.85706 19.25 9.625 19.25H1.75C1.28587 19.25 0.840752 19.0656 0.512563 18.7374C0.184374 18.4092 0 17.9641 0 17.5V1.75C0 1.28587 0.184374 0.840752 0.512563 0.512563C0.840752 0.184374 1.28587 0 1.75 0L14 0ZM7.875 3.5C8.10706 3.5 8.32962 3.59219 8.49372 3.75628C8.65781 3.92038 8.75 4.14294 8.75 4.375V5.25H11.375C11.5044 5.25008 11.6322 5.27886 11.7491 5.33427C11.8661 5.38967 11.9693 5.47033 12.0513 5.57042C12.1333 5.67052 12.1921 5.78756 12.2234 5.91311C12.2548 6.03866 12.2579 6.16961 12.2325 6.2965C12.1283 6.78403 12.0034 7.26689 11.858 7.74375C11.538 8.82641 11.1258 9.87967 10.626 10.892C10.2118 11.7411 9.70471 12.5417 9.114 13.279C9.39867 13.4692 9.69617 13.6395 10.0065 13.79C10.1099 13.8401 10.2025 13.9101 10.2788 13.9959C10.3552 14.0818 10.4139 14.1819 10.4516 14.2904C10.4893 14.399 10.5053 14.5139 10.4985 14.6286C10.4918 14.7433 10.4626 14.8556 10.4125 14.959C10.3624 15.0624 10.2924 15.155 10.2066 15.2313C10.1207 15.3077 10.0206 15.3664 9.91209 15.4041C9.80353 15.4418 9.68862 15.4578 9.5739 15.451C9.45919 15.4443 9.34692 15.4151 9.2435 15.365C8.75366 15.1276 8.28525 14.8483 7.8435 14.5303C6.86029 15.3205 5.63645 15.7509 4.375 15.75C4.14294 15.75 3.92038 15.6578 3.75628 15.4937C3.59219 15.3296 3.5 15.1071 3.5 14.875C3.5 14.6429 3.59219 14.4204 3.75628 14.2563C3.92038 14.0922 4.14294 14 4.375 14C5.131 14 5.83625 13.7725 6.489 13.3385C5.56296 12.3559 4.85822 11.1863 4.42225 9.9085C4.38144 9.79892 4.36301 9.68228 4.36804 9.56545C4.37308 9.44863 4.40147 9.33401 4.45156 9.22834C4.50164 9.12268 4.57239 9.02813 4.65964 8.95028C4.74688 8.87242 4.84884 8.81284 4.9595 8.77506C5.07016 8.73728 5.18727 8.72206 5.3039 8.7303C5.42054 8.73854 5.53435 8.77008 5.63859 8.82304C5.74284 8.87601 5.83541 8.94934 5.91084 9.03869C5.98627 9.12803 6.04302 9.2316 6.07775 9.34325C6.43407 10.3889 7.01122 11.3456 7.77 12.1485C8.2355 11.5827 8.666 10.9025 9.0615 10.108C9.55316 9.11091 9.95153 8.07048 10.2515 7H4.375C4.14294 7 3.92038 6.90781 3.75628 6.74372C3.59219 6.57962 3.5 6.35706 3.5 6.125C3.5 5.89294 3.59219 5.67038 3.75628 5.50628C3.92038 5.34219 4.14294 5.25 4.375 5.25H7V4.375C7 4.14294 7.09219 3.92038 7.25628 3.75628C7.42038 3.59219 7.64294 3.5 7.875 3.5Z"
                                        fill="#053862" />
                                </g>
                                <defs>
                                    <clipPath id="clip0_49_906">
                                        <rect width="28" height="28" fill="white" />
                                    </clipPath>
                                </defs>
                            </svg>

                            Consultation services
                        </div>
                    </div>
                </div>

                <!-- Procedures -->
                <div id="procedures" class="mb-5 pb-5 section-base">
                    <h3 class="section-title">Procedures</h3>
                    <Accordion parent v-for="treatment in hospital.treatments" :key="treatment.id">
                        <AccordionSection :title="treatment.name" :active="true">
                            <span v-for="subtreatment in treatment.children" :key="subtreatment.id"
                                class="d-flex flex-wrap justify-content-between">
                                <span>{{ subtreatment.name }}</span>
                            </span>
                        </AccordionSection>
                    </Accordion>
                </div>

                <!-- Medical Staff -->
                <div id="medical-staff" class="mb-5 pb-5 section-base">
                    <h3 class="section-title">Medical Staff</h3>
                    <div class="accordion" id="staffAccordion">
                        <div class="accordion-item mb-0" >
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapsePeriodontist">
                                    Periodontist
                                </button>
                            </h2>
                            <!-- <div id="collapsePeriodontist" class="accordion-collapse collapse show"
                                data-bs-parent="#staffAccordion">
                                <div class="accordion-body">
                                    <div class="staff-member">
                                        <img src="https://i.imgur.com/1v2hY88.png" alt="Dr. Emily Carter" />
                                        <div class="staff-info">
                                            <h6>Dr. Emily Carter</h6>
                                            <p>Periodontist, Implantologist, Endodontist...</p>
                                            <p class="exp">Experience: 10 years</p>
                                        </div>
                                    </div>
                                    <div class="staff-member">
                                        <img src="https://i.imgur.com/gX33k5w.png" alt="Dr. James Anderson" />
                                        <div class="staff-info">
                                            <h6>Dr. James Anderson</h6>
                                            <p>
                                                Pediatric Dentist, Prosthodontist, Cosmetic Dentist...
                                            </p>
                                            <p class="exp">Experience: 10 years</p>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                        </div>
                    </div>
                    <br />
                    <div class="accordion" id="CardiologyAccordions">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapsePeriodontists">
                                   Cardiology
                                </button>
                            </h2>
                            <!-- <div id="collapsePeriodontists" class="accordion-collapse collapse"
                                data-bs-parent="#staffAccordions">
                                <div class="accordion-body">
                                    <div class="staff-member">
                                        <img src="https://i.imgur.com/1v2hY88.png" alt="Dr. Emily Carter" />
                                        <div class="staff-info">
                                            <h6>Dr. Emily Carter</h6>
                                            <p>Periodontist, Implantologist, Endodontist...</p>
                                            <p>Experience: 10 years</p>
                                        </div>
                                    </div>
                                    <div class="staff-member">
                                        <img src="https://i.imgur.com/gX33k5w.png" alt="Dr. James Anderson" />
                                        <div class="staff-info">
                                            <h6>Dr. James Anderson</h6>
                                            <p>
                                                Pediatric Dentist, Prosthodontist, Cosmetic Dentist...
                                            </p>
                                            <p>Experience: 8 years</p>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                        </div>
                    </div>
                    <div class="accordion" id="DermatologyAccordions">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapsePeriodontists">
                                    Dermatology
                                </button>
                            </h2>
                            <!-- <div id="collapsePeriodontists" class="accordion-collapse collapse"
                                data-bs-parent="#staffAccordions">
                                <div class="accordion-body">
                                    <div class="staff-member">
                                        <img src="https://i.imgur.com/1v2hY88.png" alt="Dr. Emily Carter" />
                                        <div class="staff-info">
                                            <h6>Dr. Emily Carter</h6>
                                            <p>Periodontist, Implantologist, Endodontist...</p>
                                            <p>Experience: 10 years</p>
                                        </div>
                                    </div>
                                    <div class="staff-member">
                                        <img src="https://i.imgur.com/gX33k5w.png" alt="Dr. James Anderson" />
                                        <div class="staff-info">
                                            <h6>Dr. James Anderson</h6>
                                            <p>
                                                Pediatric Dentist, Prosthodontist, Cosmetic Dentist...
                                            </p>
                                            <p>Experience: 8 years</p>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                        </div>
                    </div>
                    <div class="accordion" id="PediatricsAccordions">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapsePeriodontists">
                                    Pediatrics
                                </button>
                            </h2>
                            <!-- <div id="collapsePeriodontists" class="accordion-collapse collapse"
                                data-bs-parent="#staffAccordions">
                                <div class="accordion-body">
                                    <div class="staff-member">
                                        <img src="https://i.imgur.com/1v2hY88.png" alt="Dr. Emily Carter" />
                                        <div class="staff-info">
                                            <h6>Dr. Emily Carter</h6>
                                            <p>Periodontist, Implantologist, Endodontist...</p>
                                            <p>Experience: 10 years</p>
                                        </div>
                                    </div>
                                    <div class="staff-member">
                                        <img src="https://i.imgur.com/gX33k5w.png" alt="Dr. James Anderson" />
                                        <div class="staff-info">
                                            <h6>Dr. James Anderson</h6>
                                            <p>
                                                Pediatric Dentist, Prosthodontist, Cosmetic Dentist...
                                            </p>
                                            <p>Experience: 8 years</p>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>

                <!-- Reviews -->
                <div id="reviews" class="mb-5 pb-5 section-base">
                    <h3 class="section-title">Review</h3>
                    <div class="review-summary">
                        <div class="review-score">
                            <svg class="circular-progress" viewBox="0 0 36 36">
                                <!-- Background circle -->
                                <path class="circle-bg" d="M18 2.0845
                                    a 15.9155 15.9155 0 0 1 0 31.831
                                    a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#053862" stroke-width="2" />
                                <!-- Progress circle -->
                                <path class="circle" :stroke-dasharray="percentage + ', 100'" d="M18 2.0845
                                    a 15.9155 15.9155 0 0 1 0 31.831
                                    a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#053862" stroke-width="3" />
                                <!-- Center text -->
                                <text x="18" y="20.35" class="percentage-text" text-anchor="middle">
                                    {{ Number(hospital.average_rating).toFixed(1) }}
                                </text>
                            </svg>
                            <div class="stars text-warning my-2">
                                <template v-for="i in 5" :key="i">
                                    <!-- Full star -->
                                    <Icon v-if="i <= Math.floor(hospital.average_rating)" name="carbon:star-filled" />

                                    <!-- Half star -->
                                    <Icon
                                        v-else-if="i === Math.floor(hospital.average_rating) + 1 && (hospital.average_rating % 1) >= 0.5"
                                        name="carbon:star-half" />

                                    <!-- Empty star -->
                                    <Icon v-else name="carbon:star" />
                                </template>
                            </div>
                            <div class="score-block">
                                <div class="score-title">{{
                                    hospital.average_rating >= 4.5 ? 'Excellent Score' :
                                        hospital.average_rating >= 3.5 ? 'Good Score' :
                                            hospital.average_rating >= 2.5 ? 'Average Score' :
                                                'Poor Score'
                                }}</div>
                                <a href="#" class="score-link">{{ hospital.total_reviews }} patient verified review</a>
                            </div>
                        </div>
                        <div class="review-breakdown">
                            <div class="review-bar" v-for="star in [5, 4, 3, 2, 1]" :key="star">
                                <span>{{ star }} star{{ star > 1 ? 's' : '' }}</span>

                                <div class="progress">
                                    <div class="progress-bar" :style="{ width: getStarPercentage(star) + '%' }"></div>
                                </div>

                                <span>{{ Number(getStarPercentage(star)).toFixed(0) }}%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Right Column: Sidebar -->
            <div class="col-lg-4">
                <div class="card card-body sidebar-card">
                    <div class="map-placeholder mb-3">
                        <img :src="hospital.image_urls[0]" :alt="title" />
                    </div>
                    <div class="hospital-header d-flex align-items-center justify-content-between">
                        <h5 class="hospital-name text-truncate">
                            {{ title }}
                        </h5>
                        <div class="rating d-flex align-items-center ms-2">
                            <div class="rating-score">{{ Number(hospital.average_rating).toFixed(1) }}</div>
                            <Icon name="carbon:star-filled" class="stars text-warning" />
                        </div>
                    </div>
                    <div class="hospital-location-section">
                        <Icon name="material-symbols:location-on-outline" style="color:#053862;" />
                        <p class="text-muted ms-0 ps-2">{{ shortAddress }}</p>
                    </div>
                    <!-- Info Buttons -->
                    <div class="info-buttons d-flex gap-2 flex-wrap" style="margin-top: 10px;">
                        <NuxtLink :to="`tel:${hospital.phone}`" class="btn btn-sm btn-light">
                            <Icon name="bi:telephone" style="color:#053862; margin-right:5px; font-size: 18px;"/>
                            Call
                        </NuxtLink>
                        <NuxtLink
                            :to="`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(hospital.location)}`"
                            class="btn btn-sm btn-light">
                            <Icon name="material-symbols:location-on-outline" style="color:#053862; margin-right:5px; font-size: 18px;"/>
                            Google Map
                        </NuxtLink>
                        <NuxtLink :to="`/${hospital.url}`" class="btn btn-sm btn-light">
                            <Icon name="streamline-plump:web-remix" style="color:#053862; margin-right:5px; font-size: 18px;"/>
                            Website
                        </NuxtLink>
                    </div>
                    <NuxtLink to="#" class="btn btn-primary w-100">CTA {will be like to open form}</NuxtLink>
                </div>
            </div>

            <!--=============== POPULAR RESTAURENTS SECTION ===============-->
            <RestaurentSection id="hotels" />

            <!--=============== POPULAR HOTELS SECTION ===============-->
            <HotelSection id="restaurants" />
        </div>
    </main>
</template>

<script setup lang="ts">
import { useHospitalStore } from '~/stores/hospital'
import { useRoute } from 'vue-router'
import HotelSection from '~/components/hotels/HotelSection.vue'

const store = useHospitalStore()
const route = useRoute()
const { hospitals } = storeToRefs(store)

const showMore = ref(false)

if (!hospitals.value.length) {
    await store.index()
}

const hospital = computed(() =>
    hospitals.value.find(h => h.id == route.params.id)
)

// Helpers
const title = computed(() => useCapitalize(hospital.value.title || ""))
const shortAddress = computed(() =>
    useTruncateText(hospital.value.address || "", 40)
)

// Description logic
const needsTruncate = computed(
    () => hospital.value.description?.length > 500
)

const truncatedDescription = computed(() => {
    if (showMore.value || !needsTruncate.value) {
        return hospital.value.description || ""
    }
    return hospital.value.description.slice(0, 100)
})

const toggleDescription = () => {
    showMore.value = !showMore.value
}

const percentage = computed(() => (hospital.value.average_rating / 5) * 100)

// Count of reviews for a given star
const getStarCount = (star: number) => {
    return hospital.value.reviews.filter(r => r.rating === star).length
}

// Percentage for the progress bar
const getStarPercentage = (star: number) => {
    if (!hospital.value.reviews.length) return 0
    return (getStarCount(star) / hospital.value.reviews.length) * 100
}

const getIcon = (slug: string): string => {
    const icons: Record<string, string> = {
        airport_pickup: "mdi:wifi",
        cafe: "mdi:car",
        free_wifi: "mdi:hospital-building",
        medical_travel_insurance: "mdi:silverware-fork-knife",
        parking_available: "mdi:silverware-fork-knife",
        restaurant: "mdi:silverware-fork-knife",
        pharmacy: "mdi:silverware-fork-knife",
        tv_in_the_room: "mdi:silverware-fork-knife",
        consultation_services: "mdi:silverware-fork-knife"
    }

    // fallback icon
    return icons[slug] || "mdi:web"
}
</script>

<style scoped>
.circular-progress {
    width: 80px;
    height: 80px;
    transform: rotate(0deg);
}

.circle-bg {
    stroke: #f8f8f8;
}

.circle {
    stroke-linecap: round;
    transition: stroke-dasharray 0.3s ease;
}

.percentage-text {
    font-size: 0.5em;
    fill: #333; 
    dominant-baseline: middle;
}

.review-bar {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 21px;
}

.progress {
    flex: 1;
    height: 8px;
    background: #eee;
    border-radius: 4px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    background: #053862;
}

.subtreatments-flex {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    /* space between items */
}

.subtreatments-flex span {
    padding: 5px 10px;
    background: #f0f0f0;
    border-radius: 5px;
}
</style>